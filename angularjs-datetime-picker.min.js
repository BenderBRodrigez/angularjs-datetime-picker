!function(){"use strict";angular.module("angularjs-datetime-picker",[]);var e=function(e,t,a){var n=a("DatetimePickerCtrl");return{open:function(e){n.openDatetimePicker(e)},close:function(){n.closeDatetimePicker()}}};e.$inject=["$compile","$document","$controller"],angular.module("angularjs-datetime-picker").factory("DatetimePicker",e);var t=function(e,t){var a,n=this,i=function(e){e&&e.remove(),t[0].body.removeEventListener("click",n.closeDatetimePicker)};this.openDatetimePicker=function(n){this.closeDatetimePicker();var i=angular.element("<div datetime-picker-popup ng-cloak></div>");n.dateFormat&&i.attr("date-format",n.dateFormat),n.ngModel&&i.attr("ng-model",n.ngModel),n.year&&i.attr("year",parseInt(n.year)),n.month&&i.attr("month",parseInt(n.month)),n.day&&i.attr("day",parseInt(n.day)),n.hour&&i.attr("hour",parseInt(n.hour)),n.minute&&i.attr("minute",parseInt(n.minute)),n.dateOnly&&i.attr("date-only",n.dateOnly),"false"===n.closeOnSelect&&i.attr("close-on-select","false");var l=n.triggerEl;n.scope=n.scope||angular.element(l).scope(),a=e(i)(n.scope)[0],a.triggerEl=n.triggerEl,t[0].body.appendChild(a);var r=l.getBoundingClientRect();n.scope.$apply();var o=a.getBoundingClientRect();a.style.position="absolute",r.width>o.width?a.style.left=r.left+r.width-o.width+window.scrollX+"px":a.style.left=r.left+window.scrollX+"px",r.top<300||window.innerHeight-r.bottom>300?a.style.top=r.bottom+window.scrollY+"px":a.style.top=r.top-o.height+window.scrollY+"px",t[0].body.addEventListener("click",this.closeDatetimePicker)},this.closeDatetimePicker=function(e){var a=e&&e.target,n=t[0].querySelector("div[datetime-picker-popup]");e&&a?a.hasAttribute("datetime-picker")||n&&n.contains(a)||i(n):i(n)}};t.$inject=["$compile","$document"],angular.module("angularjs-datetime-picker").controller("DatetimePickerCtrl",t);var a=['<div class="angularjs-datetime-picker">','  <div class="adp-month">','    <button type="button" class="adp-prev" ng-click="addMonth(-1)">&laquo;</button>','    <span title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}}</span> {{mv.year}}','    <button type="button" class="adp-next" ng-click="addMonth(1)">&raquo;</button>',"  </div>",'  <div class="adp-days" ng-click="setDate($event)">','    <div class="adp-day-of-week" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}">{{::dayOfWeek.firstLetter}}</div>','    <div class="adp-day" ng-show="mv.leadingDays.length < 7" ng-repeat="day in mv.leadingDays">{{::day}}</div>','    <div class="adp-day selectable" ng-repeat="day in mv.days" ',"      today=\"{{today}}\" d2=\"{{mv.year + '-' + (mv.month + 1) + '-' + day}}\"",'      ng-class="{',"        today: (day == selectedDay),","        selected: (today == (mv.year + '-' + (mv.month + 1) + '-' + day)),","        weekend: (mv.leadingDays.length + day)%7 == 1 || (mv.leadingDays.length + day)%7 == 0",'      }">',"      {{::day}}","    </div>",'    <div class="adp-day" ng-show="mv.trailingDays.length < 7" ng-repeat="day in mv.trailingDays">{{::day}}</div>',"  </div>",'  <div class="adp-days adp-time"> ','    <input type="checkbox" id="date-only" ng-model="dateOnly" ng-change="toggleDateOnly()" /><label for="date-only">Flexible Time</label> ',"  </div> ",'  <div class="adp-days adp-time" ng-if="!dateOnly"> ','    <label class="timeLabel">Start Time:</label> ','    <span class="timeValue"> ','      <i class="fa fa-chevron-left" ng-click="decreHour()"></i> ','      {{("0"+displayHour).slice(-2)}} ','      <i class="fa fa-chevron-right" ng-click="increHour()"></i> ','      : <i class="fa fa-chevron-left" ng-click="decreMinute()"></i> ','      {{("0"+inputMinute).slice(-2)}} ','      <i class="fa fa-chevron-right" ng-click="increMinute()"></i> ','      <span ng-click="toggleAmPm()">{{ampm}}</span> ',"    </span>","  </div>","</div>"].join("\n"),n=function(e,t){var n,i,l,r,o=function(){n=[],i=[],l=[],r=0;for(var t=1;t<=31;t++)n.push(t);for(var t=0;t<12;t++)i.push({fullName:e.DATETIME_FORMATS.MONTH[t],shortName:e.DATETIME_FORMATS.SHORTMONTH[t]});for(var t=0;t<7;t++){var a=e.DATETIME_FORMATS.DAY[(t+r)%7];l.push({fullName:a,firstLetter:a.substr(0,1)})}r=0},d=function(e,t){t>11?e++:t<0&&e--,t=(t+12)%12;var a=new Date(e,t,1),i=new Date(e,t+1,0),l=new Date(e,t,0),o=i.getDate(),d=l.getDate(),c=a.getDay(),s=(c-r+7)%7||7,u=n.slice(0,42-(s+o));return u.length>7&&(u=u.slice(0,u.length-7)),{year:e,month:t,days:n.slice(0,o),leadingDays:n.slice(-s-(31-d),d),trailingDays:u}},c=function(e,a,n,r){o();var c=n.dateFormat||"short",s=function(){e.ampm="AM"==e.ampm?"PM":"AM"};e.months=i,e.daysOfWeek=l,e.inputHour,e.inputMinute,e.$applyAsync(function(){if(r.triggerEl=angular.element(a[0].triggerEl),n.ngModel){var i=""+r.triggerEl.scope().$eval(n.ngModel);i&&(i.match(/[0-9]{2}:/)||(i+=" 00:00"),i=i.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1"),i=i.replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,""),i=i.replace(/\s*\(\)\s*/,""),i=i.replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,""),e.selectedDate=new Date(i))}if(!e.selectedDate||isNaN(e.selectedDate.getTime())){var l=new Date,o=e.year||l.getFullYear(),c=e.month?e.month-1:l.getMonth(),s=e.day||l.getDate(),u=e.hour||l.getHours(),p=e.minute||l.getMinutes();e.selectedDate=new Date(o,c,s,u,p,0)}e.inputHour=e.selectedDate.getHours(),e.inputMinute=e.selectedDate.getMinutes(),e.ampm=e.inputHour>=12?"PM":"AM",e.displayHour="PM"==e.ampm?e.inputHour-12:e.inputHour,e.displayHour||(e.displayHour=12),e.mv=d(e.selectedDate.getFullYear(),e.selectedDate.getMonth()),e.today=t(new Date,"yyyy-M-d"),e.mv.year==e.selectedDate.getFullYear()&&e.mv.month==e.selectedDate.getMonth()?e.selectedDay=e.selectedDate.getDate():e.selectedDay=null}),e.toggleAmPm=function(){s(),"AM"==e.ampm&&(e.inputHour-=12),"PM"==e.ampm&&(e.inputHour+=12),e.updateNgModel()},e.toggleDateOnly=function(){c=e.dateOnly?"MM/dd/yyyy":n.dateFormat,e.inputHour||(e.displayHour=12),e.updateNgModel()},e.addMonth=function(t){e.mv=d(e.mv.year,e.mv.month+t)},e.setDate=function(t){var a=angular.element(t.target)[0];a.className.indexOf("selectable")!==-1&&(e.updateNgModel(parseInt(a.innerHTML)),e.closeOnSelect!==!1&&r.closeDatetimePicker())},e.updateNgModel=function(a){if(a=a?a:e.selectedDate.getDate(),e.selectedDate=new Date(e.mv.year,e.mv.month,a,e.inputHour,e.inputMinute,0),e.selectedDay=e.selectedDate.getDate(),n.ngModel){var i,l=r.triggerEl.scope();i=l.$eval(n.ngModel)&&"Date"===l.$eval(n.ngModel).constructor.name?new Date(t(e.selectedDate,c)):t(e.selectedDate,c),l.$eval(n.ngModel+"= date",{date:i})}},e.increMinute=function(){e.inputMinute=e.inputMinute<45?e.inputMinute+15:0,e.updateNgModel()},e.decreMinute=function(){e.inputMinute=e.inputMinute<15?45:e.inputMinute-15,e.updateNgModel()},e.increHour=function(){e.inputHour=e.inputHour<23?e.inputHour+1:0,e.displayHour=e.displayHour<12?e.displayHour+1:1,12==e.displayHour&&s(),e.updateNgModel()},e.decreHour=function(){e.inputHour=e.inputHour>0?e.inputHour-1:23,e.displayHour=e.displayHour>1?e.displayHour-1:12,11==e.displayHour&&s(),e.updateNgModel()},e.$on("$destroy",r.closeDatetimePicker)};return{restrict:"A",template:a,controller:"DatetimePickerCtrl",replace:!0,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"="},link:c}};n.$inject=["$locale","dateFilter"],angular.module("angularjs-datetime-picker").directive("datetimePickerPopup",n);var i=function(e,t){return{require:"ngModel",link:function(e,a,n,i){e.$watch(n.ngModel,function(e){if(e&&""!=e){var t=new Date(e);i.$setValidity("date",!!t);var a=new Date;n.hasOwnProperty("futureOnly")&&i.$setValidity("future-only",!(t<a))}}),a[0].addEventListener("click",function(){t.open({triggerEl:a[0],dateFormat:n.dateFormat,ngModel:n.ngModel,year:n.year,month:n.month,day:n.day,hour:n.hour,minute:n.minute,dateOnly:n.dateOnly,futureOnly:n.futureOnly,closeOnSelect:n.closeOnSelect})})}}};i.$inject=["$parse","DatetimePicker"],angular.module("angularjs-datetime-picker").directive("datetimePicker",i)}();